<!-- <p>com works!</p> -->




<!-- Start Detail Modal -->
<!-- ====================================================================================================== -->

<div class="modal fade" id="comdetailmodal" tabindex="-1" role="dialog" aria-labelledby="comdetailmodalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document" style="width:820px;">
    <!-- <div class="modal-content" style="padding:30px;padding-bottom: 15px;background-color: #e9e9e9;"> -->
      <div class="modal-content" style="padding:40px;padding-bottom: 15px;background-color: #e6e6e6;">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h5 class="modal-title" id="comdetailmodalLabel" style="font-weight: bold;font-size: 26px;padding-bottom: 0px;">
          Company Detail</h5>
      </div>

      <div *ngIf="loading2" class="loading-container" style="
            position:absolute;
            top:0;
            left:0;
            bottom:0;
            right:0;
            height:90%;
            margin-top: 80px;
            width:100%;
            z-index: 2;">
        <img class="imgloading"
          style=" margin-left: auto; margin-right: auto;display: block;margin-top: 155px;width:15%"
          src="/assets/images/loading.gif" />
      </div>
      <!-- END LOADING IMAGE DIV  -->
      <!-- ************************************************************************************** -->



      <div class="modal-body" style="padding-top: 0px;margin-top: -15px;">

        <div class="mb-3" hidden>
          <label for="inputPassword" class="form-label">ComID</label>
          <input type="text" value="{{com.ComID}}" class="form-control" id="comid" name="comid" />
        </div>


        <div class="row">

          <div class="col-sm-7">

            <div class="mb-3">
              <label for="inputPassword" class="form-label">CompanyName</label>
              <input type="text" disabled value="{{com.CompanyName}}" class="form-control" id="companyname" name="companyname" />
            </div>


            <div class="mb-3">
              <label for="inputPassword" class="form-label">AddressLine1</label>
              <input type="text" disabled value="{{com.AddressLine1}}" class="form-control" id="addressline1"
                name="addressline1" />
            </div>

            <div class="mb-3">
              <label for="inputPassword" class="form-label">AddressLine2</label>
              <input type="text" disabled value="{{com.AddressLine2}}" class="form-control" id="addressline2"
                name="addressline2" />
            </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">City</label>
                <input type="text" disabled value="{{com.City}}" class="form-control" id="city" name="city" />
              </div>
  
              <div class="mb-3">
                <label for="inputPassword" class="form-label">State</label>
                <input type="text" disabled value="{{com.State}}" class="form-control" id="state" name="state" />
              </div>
              <div class="mb-3">
                <label for="inputPassword" class="form-label">Zipcode</label>
                <input type="text" disabled value="{{com.Zipcode}}" class="form-control" id="zipcode" name="zipcode" />
              </div>
  
              <div class="mb-3">
                <label for="inputPassword" class="form-label">Country</label>
                <input type="text" disabled value="{{com.Country}}" class="form-control" id="country" name="country" />
              </div>

          </div>

          <div class="col-sm-5">

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Office Category</label>
                <input type="text" disabled value="{{com.OfficeCategory}}" class="form-control" id="officecategory" name="officecategory" />
            </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Type of Ownership</label>
                <input type="text" disabled value="{{com.TypeOfOwnership}}" class="form-control" id="typeofownership" name="typeofownership" />
            </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Year Established</label>
                <input type="text" disabled value="{{com.YearEstablished}}" class="form-control" id="yearestablished" name="yearestablished" />
            </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Total Personnel</label>
                <input type="text" disabled value="{{com.TotalPersonnel}}" class="form-control" id="totalpersonnel" name="totalpersonnel" />
            </div>
            
            <div class="mb-3">
                <label for="inputPassword" class="form-label">Parent Company Name</label>
                <input type="text" disabled value="{{com.ParentCompanyName}}" class="form-control" id="parentcompanyname" name="parentcompanyname" />
              </div>

            <div class="mb-3">
                <label for="inputPassword" class="form-label">Duns No.</label>
                <input type="text" disabled value="{{com.DunsNo}}" class="form-control" id="dunsno" name="dunsno" />
              </div>

            <!-- <div class="mb-3">
              <div class="checkbox">
                <label><input type="checkbox" disabled value="{{com.ParentCompany}}" id="parentcompany" name="parentcompany"
                    style="margin-top: 0px !important;">
                    Parent Company</label>
              </div>
            </div> -->
            <div class="mb-3" >
              <div class="checkbox"  style="margin-top: -5px !important; margin-bottom: 0px !important;">
                <label style="line-height: 2;"><input id="parentcompany" name="parentcompany" disabled [(ngModel)]="com.ParentCompany" class="check-box" type="checkbox" style="background-color: white;"/> 
                  Parent Company</label>
              </div>
            </div>

            <!-- <div class="mb-3">
                <div class="checkbox">
                  <label><input type="checkbox" disabled value="{{com.IECompany}}" id="iecompany" name="iecompany"
                      style="margin-top: 0px !important;">
                      IE Company</label>
                </div>
              </div> -->
              <div class="mb-3" >
                <div class="checkbox"  style="margin-top: -5px !important; margin-bottom: 0px !important;">
                  <label style="line-height: 2;"><input id="iecompany" name="iecompany" disabled [(ngModel)]="com.IECompany" class="check-box" type="checkbox" style="background-color: white;"/> 
                    IE Company</label>
                </div>
              </div>

          </div>
        </div>
        <!-- end row -->


      </div>

      <div class="modal-footer" style="margin-top: -10px;margin-right: 0px;">
        <button type="button" id="comdetailmodal" class="btn btn-outline-dark"
          style="border: 1px solid #b0b0b0;width:100px" data-dismiss="modal">Close</button>
      </div>


    </div>
    <!-- end modal body ******************************************************************************* -->

  </div>

  <!--2023 needed to open modal with jquery but put inside the modal to keep hidden else taking space in view -->
  <!-- <button hidden id="btnEmpEditModalShow" (click)="showEmpEditModal(empid)" type="button" class="btn btn-primary" data-toggle="modal"
        data-target="#empeditmodal" style="visibility: hidden;"> -->
  <button hidden id="comdetailmodalShow" type="button" class="btn btn-primary" data-toggle="modal"
    data-target="#comdetailmodal" style="visibility: hidden;">
    Launch demo modal
  </button>


</div><!-- end Detail Modal -->








<!-- Edit Modal -->
<!-- ====================================================================================================== -->

<div class="modal fade" id="comeditmodal" tabindex="-1" role="dialog" aria-labelledby="comeditmodalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document" style="width:820px;">
    <!-- <div class="modal-content" style="padding:30px;padding-bottom: 5px;background-color: #e9e9e9;"> -->
      <div class="modal-content" style="padding:40px;padding-bottom: 15px;background-color: #e6e6e6;">

      <div class="modal-header">
        <button (click)="clearFormErrors()" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h5 *ngIf="modalClicked=='editModal'" class="modal-title" id="usereditmodalLabel"
          style="font-weight: bold;font-size: 26px;">Edit Company
        </h5>
        <h5 *ngIf="modalClicked=='addModal'" class="modal-title" id="usereditmodalLabel"
          style="font-weight: bold;font-size: 26px;">Add Company
        </h5>
      </div>

      <div *ngIf="loading2" class="loading-container" style="
        position:absolute;
        top:0;
        left:0;
        bottom:0;
        right:0;
        height:90%;
        margin-top: 80px;
        width:100%;
        z-index: 2;">
        <img class="imgloading"
          style=" margin-left: auto; margin-right: auto;display: block;margin-top: 155px;width:15%"
          src="/assets/images/loading.gif" />
      </div>
      <!-- END LOADING IMAGE DIV  -->


      <div class="modal-body" style="padding-top: 0px; margin-top: -15px;">

        <!-- All serverside validation on top and client side validation below input -->
        <div *ngIf="formErrors[0].msg" class="alert alert-danger alert-dismissible"
          style="background-color: #ffe4e1 !important;" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
          <!-- {{formErrors[0].msg}} -->
          <div *ngFor="let item of formErrors">
            <li style="font-size: 90%;list-style:none;padding-bottom:5px;" class="text-danger small">{{item.msg}}</li>
          </div>
        </div>


        <!-- https://www.youtube.com/watch?v=Wr5urqswiko&list=PLQcBFrxTul9IQFF7fJz7jgdRYJz1OCbll&index=6 -->
        <form [formGroup]="comFormGroup" (ngSubmit)="saveCom()">

          <div class="row">

            <div class="col-sm-7">

              <div hidden class="mb-3">
                <label for="inputPassword" class="form-label">ComId</label>
                <input type="text" class="form-control" formControlName="comid" id="comid" name="comid" />
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">Company Name <span
                    style="color:red;font-size: 14px;">*</span></label>
                <input type="text" class="form-control " formControlName="companyname" id="companyname" name="companyname" />
                <span style="font-size: 100%;" class="text-danger small"
                  *ngIf="companyname && companyname?.invalid && companyname?.touched">Company Name field is
                  required</span>
              </div>





              <div class="mb-3">
                <label for="inputPassword" class="form-label">AddressLine1</label>
                <input type="text" class="form-control " formControlName="addressline1" id="addressline1"
                  name="addressline1" />
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">AddressLine2</label>
                <input type="text" class="form-control " formControlName="addressline2" id="addressline2"
                  name="addressline2" />
              </div>
              <div class="mb-3">
                <label for="inputPassword" class="form-label">City</label>
                <input type="text" class="form-control " formControlName="city" id="city" name="city" />
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">State</label>
                <select id="state" name="state" formControlName="state" class="form-control">
                  <option *ngFor="let item of cmbState" [value]="item.ListID">{{item.Str1}}</option>
                </select>
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">Zipcode</label>
                <input type="text" class="form-control " formControlName="zipcode" id="zipcode" name="zipcode" />
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">Country</label>
                <select id="country" name="country" formControlName="country" class="form-control">
                  <option *ngFor="let item of cmbCountry" [value]="item.ListID">{{item.Str1}}</option>
                </select>
              </div>




            </div>

            <div class="col-sm-5">

                <div class="mb-3">
                    <label for="inputPassword" class="form-label">Office Category </label>
                    <select id="state" name="state" formControlName="officecategory" class="form-control">
                      <option *ngFor="let item of cmbOffiCecategory" [value]="item.ListID">{{item.Str1}}</option>
                    </select>
                  </div>
    
                  <div class="mb-3">
                    <label for="inputPassword" class="form-label">Type of Ownership</label>
                    <select id="state" name="typeofownership" formControlName="typeofownership" class="form-control">
                      <option *ngFor="let item of cmbTypeOfOwnership" [value]="item.ListID">{{item.Str1}}</option>
                    </select>
                  </div>
    
                  <div class="mb-3">
                    <label for="inputPassword" class="form-label">Year Established</label>
                    <input type="text" class="form-control " formControlName="yearestablished" id="yearestablished" name="yearestablished" />
                  </div>
    
                  <div class="mb-3">
                    <label for="inputPassword" class="form-label">Total Personnel</label>
                    <input type="text" class="form-control " formControlName="totalpersonnel" id="totalpersonnel" name="totalpersonnel" />
                  </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">Parent Company Name</label>
                <input type="text" class="form-control " formControlName="parentcompanyname" id="parentcompanyname" name="parentcompanyname" />
              </div>

              <div class="mb-3">
                <label for="inputPassword" class="form-label">Duns No.</label>
                <input type="text" class="form-control " formControlName="dunsno" id="dunsno" name="dunsno" />
              </div>

              <div class="mb-3">
                <div class="checkbox"  style="margin-top: 0px !important; margin-bottom: 0px !important;">
                  <label><input type="checkbox"  style="margin-top:0px"   formControlName="parentcompany" id="parentcompany" name="parentcompany">
                    Parent Company</label>
                </div>
              </div>

              <div class="mb-3">
                <div class="checkbox" style="margin-top: -5px !important; margin-bottom: 0px !important;">
                  <label><input type="checkbox"  style="margin-top:0px"  formControlName="iecompany" id="iecompany" name="iecompany">
                    IE Company</label>
                </div>
              </div>



            </div>

          </div>
          <!-- end row -->



          <div class="modal-footer" style="padding-top: 25px;padding-right: 0px;">
            <button [disabled]="comFormGroup.invalid" type="submit" class="btn btn-primary">Save changes</button>
            <button (click)="clearFormErrors()" type="button" id="btnComEditCloseModal" class="btn btn-outline-dark"
              style="border: 1px solid #b0b0b0;width:100px" data-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>

      <!-- <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" style="border: 1px solid #b0b0b0;width:100px" data-dismiss="modal">Close</button>
      <button type="submit"  class="btn btn-primary">Save changes</button>
      </div> -->

    </div>
  </div>



  <!--2023 needed to open modal with jquery but put inside the modal to keep hidden else taking space in view -->
  <!-- <button hidden id="btnEmpEditModalShow" (click)="showEmpEditModal(empid)" type="button" class="btn btn-primary" data-toggle="modal"
  data-target="#empeditmodal" style="visibility: hidden;"> -->
  <button hidden id="btnComEditModalShow" type="button" class="btn btn-primary" data-toggle="modal"
    data-target="#comeditmodal" style="visibility: hidden;">
    Launch demo modal
  </button>

</div>

<!-- END Edit Modal -->












<div>
    <!-- <a (click)="clearSearch()" style="margin-left:4px;border-color: #959595;color:#006fae;" type="button" id="reset"
        class="btn btn-outline-dark pull-right btn-sm"><span aria-hidden="true" class="glyphicon glyphicon-refresh"
            style="color:#006fae"></span> Reset</a>   -->
    <a (click)="showComAddModal()" type="button" class="btn btn-outline-dark pull-right btn-sm btn-add"
      style="margin-left:4px;margin-bottom:8px;color:#006fae; border-color: #959595;" data-toggle="modal"
      data-target="#empeditmodal"> <span aria-hidden="true" class="glyphicon glyphicon-plus" style="color:#006fae"></span>
      Add new</a>

</div>

<h2 style="margin-bottom: 5px;font-weight: bold;color: rgb(51, 51, 51);margin-top: 10px;">Company</h2>

<div class="container" style="background-color: #f1f3f4;border:1px solid #337ab7; padding: 5px; margin: 0px;width:100%">
    <br />



    <!-- Datatable -->
    <!-- =================================================================================================== -->
    <table id="dt" datatable [dtOptions]="dtOptions" class="row-border hover table table-bordered table-striped"
        style=" width: 100%; cursor: default;">

        <!-- thead is used twice because the header was not visible since datatable visibility turned off 
      so that data does not repeat. We need it to export in excel. This affects thead visibility. So used twice to make visible  -->
        <thead class="" style="border:1px solid red">
            <tr class="bg-primary">
                <th scope="col" style="min-width: 200px;max-width: 200px;">CompanyName</th>
                <th scope="col" style="min-width: 100px;max-width: 100px;">State</th>
                <th scope="col" style="min-width: 120px;max-width: 120px;">Country</th>
                <th scope="col" style="min-width: 120px;max-width: 120px;">IECompany</th>
                <!-- <th scope="col">Action</th> -->
                <th scope="col" style="text-align: center;min-width: 100px;max-width: 100px;">Action</th>
            </tr>
        </thead>
    </table>

</div>
