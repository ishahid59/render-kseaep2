<!-- <p>project-edit-modal works!</p> -->





<!-- Edit Modal -->
<!-- ====================================================================================================== -->
<div class="modal fade" id="proeditmodal" tabindex="-1" role="dialog" aria-labelledby="proeditmodalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document" style="width:900px;">
        <div class="modal-content" style="padding:45px;padding-top:20px;padding-bottom: 5px;background-color: #eeeeee;">
            <div class="modal-header" style="padding-bottom: 0px;">
                <button (click)="clearFormErrors()" type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h5 class="modal-title" id="proeditmodalLabel" style="font-weight: bold;font-size: 28px;">Project</h5>

            </div>
            <!-- <hr style=" margin-left: 15px;margin-right: 15px;"> -->
            <!-- LOADING IMAGE DIV  -->
            <div *ngIf="loading2" class="loading-container" style="width: 100%;
                                    background-color: transparent;
                                    opacity:1;
                                    position: absolute;
                                    z-index: 2;
                                    margin-left: 0%;
                                    margin-right: 0%;
                                    margin-top: 0%;
                                    margin-bottom: 0%;
                                    height: 84.5%;
                                    padding-top: 60px;">
                <img class="imgloading" style="display: block; margin-left: auto;margin-right: auto;"
                    src="/assets/images/loading.gif" />
            </div>
            <!-- END LOADING IMAGE DIV  -->

            <div class="modal-body" style="padding-top: 0px;">


                <!-- All serverside validation on top and client side validation below input -->
                <div *ngIf="formErrors[0].msg" class="alert alert-danger alert-dismissible"
                    style="background-color: #ffe4e1 !important;" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <!-- {{formErrors[0].msg}} -->
                    <div *ngFor="let item of formErrors ">
                        <li style="font-size: 90%;list-style:none;padding-bottom:5px;" class="text-danger small">
                            {{item.msg}}</li>
                    </div>
                </div>



                <!-- ***************************************************************** -->
                <!-- START FORM -->
                <!-- ***************************************************************** -->
                
                <div class="row">
                
                 
                
                
                
                    <!-- https://www.youtube.com/watch?v=Wr5urqswiko&list=PLQcBFrxTul9IQFF7fJz7jgdRYJz1OCbll&index=6 -->
                    <form [formGroup]="projectFormGroup" (ngSubmit)="savePro()">
                
                
                
                        <div hidden class="mb-3">
                            <label for="inputPassword" class="form-label">ProjectId</label>
                
                            <input type="text" class="form-control" formControlName="projectid" id="projectid" name="projectid" />
                        </div>
                
                        <!-- <textarea type="text" class="form-control" formControlName="notes" id="notes"
                        name="notes" rows="3" style="height: 100px;"></textarea> -->
                
                        <div class="col-sm-7">
                
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project name<span style="color:red;font-size: 14px;">*</span></label>
                
                                <input type="text" class="form-control " formControlName="projectname" id="projectname"
                                    name="projectname" />

                                    <!-- <textarea type="text" class="form-control" formControlName="projectname" id="projectname" name="projectname"
                                    name="notes" rows="3" ></textarea> -->

                                <!-- <span style="font-size: 90%;" class="text-danger small" *ngIf="employeeFormGroup.get('firstname') && employeeFormGroup.get('firstname')?.invalid && employeeFormGroup.get('firstname')?.touched ">Thisis not a valid input</span> -->
                                <!-- using getters for shortcut -->
                                <span style="font-size: 90%;" class="text-danger small"
                                    *ngIf="projectname && projectname?.invalid && projectname?.touched">This is not a valid
                                    input</span>
                                <!-- serverside validation now on top -->
                                <!-- <div *ngFor="let item of formErrors">
                                                        <li style="font-size: 90%;list-style:none;padding-bottom:5px;" class="text-danger small"
                                                            *ngIf="item.param == 'firstname'">{{item.test}}</li>
                                                        </div> -->
                            
                            
                             </div>
                
                
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project role</label>
                                <select style="width:300px" id="projectrole" name="projectrole" formControlName="projectrole" class="form-control">
                                    <option *ngFor="let item of CmbProPRole" [value]="item.ListID">{{item.Str1}}</option>
                                </select>
                                <!-- <span class="text-danger" *ngIf="employeeFormGroup.get('lastname') && employeeFormGroup.get('lastname')?.invalid && employeeFormGroup.get('lastname')?.touched ">This  is not a valid input</span> -->
                                <span style="font-size: 90%;" class="text-danger small"
                                    *ngIf="projectrole && projectrole?.invalid && projectrole?.touched">This is not a valid
                                    input</span>
                                <!-- <span>check and show server side err if any with server err message</span> -->
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Award year<span style="color:red;font-size: 14px;">*</span></label>
                                <input type="text" class="form-control" style="width:300px"  formControlName="awardyear" id="awardyear" name="awardyear" />
                                <!-- <span class="text-danger" *ngIf="employeeFormGroup.get('lastname') && employeeFormGroup.get('lastname')?.invalid && employeeFormGroup.get('lastname')?.touched ">This  is not a valid input</span> -->
                                <span style="font-size: 90%;" class="text-danger small"
                                    *ngIf="awardyear && awardyear?.invalid && awardyear?.touched">This is not a valid
                                    year</span>
                                <!-- <span>check and show server side err if any with server err message</span> -->
                            </div>
                
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project no.<span style="color:red;font-size: 14px;">*</span></label>
                                <input type="text" class="form-control" formControlName="projectno" id="projectno" name="projectno" />
                                <!-- <span class="text-danger" *ngIf="employeeFormGroup.get('lastname') && employeeFormGroup.get('lastname')?.invalid && employeeFormGroup.get('lastname')?.touched ">This  is not a valid input</span> -->
                                <span style="font-size: 90%;" class="text-danger small"
                                    *ngIf="projectno && projectno?.invalid && projectno?.touched">This is not a valid
                                    input</span>
                                <!-- <span>check and show server side err if any with server err message</span> -->
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Proposal no</label>
                                <select id="proposalid" name="proposalid" formControlName="proposalid"
                                    class="form-control">
                                    <option *ngFor="let item of CmbProposalMain" [value]="item.ProposalID">{{item.ProposalNo}} : {{item.ProjectName}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Primary project type</label>
                                <select id="primaryprojecttype" name="primaryprojecttype" formControlName="primaryprojecttype"
                                    class="form-control">
                                    <option *ngFor="let item of CmbProProjectType" [value]="item.ListID">{{item.Str1}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Secondary project type</label>
                                <!-- <input type="text" class="form-control" formControlName="secondaryprojecttype" id="secondaryprojecttype"
                                    name="secondaryprojecttype" /> -->
                                <textarea type="text"  class="form-control"  formControlName="secondaryprojecttype" id="secondaryprojecttype" name="secondaryprojecttype"
                                    name="notes" rows="3" ></textarea>
                            </div>  
                            
                            <!-- https://www.youtube.com/watch?v=q5jNAhYcHEI -->
                            <!-- // code for dynamically check Bootstrap multiselect from database SecondaryProjectType value
                            var items=this.formdata.SecondaryProjectType;
                            $.each(items.split(','), function(idx, val) {
                                // $("#multiproeditsecproject option[value='"+val+"']").attr("selected", "selected");
                                $("#multiproeditsecproject option[value='"+val+"']").prop('selected', true); // use prop for latest jquery
                                $("#multiproeditsecproject").multiselect('rebuild'); // **IMPORTANT
                            }); -->


                

                
                
                
                        </div>
                        <!-- end 1st col -->
                
                
                        <div class="col-sm-5" style="padding-left: 25px;">
                
                
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Company</label>
                                <select id="comid" name="comid" formControlName="comid" class="form-control">
                                    <option *ngFor="let item of CmbComMain" [value]="item.ComID">{{item.CompanyName}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project manager</label>
                                <select id="projectmanager" name="projectmanager" formControlName="projectmanager" class="form-control">
                                    <option *ngFor="let item of CmbEmpMain" [value]="item.EmpID">{{item.EmployeeID}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Owner category</label>
                                <select id="ownercategory" name="ownercategory" formControlName="ownercategory" class="form-control">
                                    <option *ngFor="let item of CmbProOCategory" [value]="item.ListID">{{item.Str1}}</option>
                                </select>
                            </div>



                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Owner</label>
                                <select id="owner" name="owner" formControlName="owner" class="form-control">
                                    <option *ngFor="let item of CmbCaoMain" [value]="item.CAOID">{{item.Name}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Client</label>
                                <select id="client" name="client" formControlName="client" class="form-control">
                                    <option *ngFor="let item of CmbCaoMain" [value]="item.CAOID">{{item.Name}}</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project agreement no.</label>
                                <input type="text" class="form-control" formControlName="projectagreementno" id="projectagreementno"
                                    name="projectagreementno" />
                            </div>
                
                            <div class="mb-3">
                                <label for="inputPassword" class="form-label">Project status</label>
                                <select id="projectstatus" name="projectstatus" formControlName="projectstatus" class="form-control">
                                    <option *ngFor="let item of CmbProStatus" [value]="item.ListID">{{item.Str1}}</option>
                                </select>
                            </div>
                
                
                
                            <!-- <div class="form-group row">
                                                    <div class="col-sm-10">
                                                    <div class="checkbox">
                                                        <label><input type="checkbox" formControlName="employee_consultant" id="consultant" name="consultant">
                                                        consultant</label>
                                                    </div>
                                                        </div>
                                                    </div> -->
                
                
                
                
                
                
                
                
                
                            <div class="modal-footer" style="padding-top: 35px;padding-right: 0px;">
                                <button [disabled]="projectFormGroup.invalid" type="submit" class="btn btn-primary">Save
                                    changes</button>                                
                                <button (click)="clearFormErrors()" type="button" id="btnEditCloseModal" class="btn btn-outline-dark"
                                    style="border: 1px solid #b0b0b0;width:100px" data-dismiss="modal">Cancel</button>

                
                                <!-- <button (click)="test1(1)" type="button" id="btnEditCloseModal" class="btn btn-outline-dark" >test</button> -->
                
                            </div>


                        </div>
                        <!-- end 2nd col -->
                
                
                    </form>
                
                
                
                </div>
                <!-- end row -->
                
                
                <!-- ***************************************************************** -->
                <!-- END FORM -->
                <!-- ***************************************************************** -->



            </div>
            <!-- end modal body -->



            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" style="border: 1px solid #b0b0b0;width:100px" data-dismiss="modal">Close</button>
                <button type="submit"  class="btn btn-primary">Save changes</button>
            </div> -->

        </div>


    </div>



    <!--2023 needed to open modal with jquery but put inside the modal to keep hidden else taking space in view -->
    <!-- <button hidden id="btnEmpEditModalShow" (click)="showEmpEditModal(empid)" type="button" class="btn btn-primary" data-toggle="modal"
    data-target="#empeditmodal" style="visibility: hidden;"> -->
    <button hidden id="btnProEditModalShow" type="button" class="btn btn-primary" data-toggle="modal"
        data-target="#proeditmodal" style="visibility: hidden;">
        Launch demo modal
    </button>

</div>